<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MST Bin - Paste</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ static_base_url }}/css/styles.css">
    <link rel="icon" type="image/png" href="{{ static_base_url }}/img/favicon.ico">
    <style>
        body, html {
            height: 100%;
        }
        #mainContent {
            padding-top: 4.5rem;
            height: 100%;
        }
        @media (max-width: 640px) {
            #mainContent {
                padding-top: 5.5rem;
            }
        }
    </style>
</head>
<body class="bg-black text-white flex flex-col min-h-screen h-full">
    <nav id="navbar" class="glassmorphism fixed top-0 left-0 right-0 z-50 w-full">
        <div class="flex flex-col sm:flex-row justify-between items-stretch w-full px-3 sm:px-6 py-2 sm:py-3 gap-2 sm:gap-4">
            <div class="flex items-center justify-center sm:justify-start flex-shrink-0 gap-2">
                <a href="/" class="text-lg sm:text-2xl font-bold flex items-center">
                    <img src="{{ static_base_url }}/img/logo.jpeg" alt="MST Bin Logo" class="h-6 sm:h-8">
                    <span class="hidden sm:inline ml-2">MST Bin</span>
                    <span class="sm:hidden ml-2">MST</span>
                </a>
                <span class="ml-2 text-blue-300 font-semibold text-xs sm:text-lg whitespace-nowrap truncate max-w-xs">{{ heading }}</span>
            </div>
            <div class="flex items-center justify-end gap-3 flex-shrink-0">
                <button id="copyContentBtn" title="Copy Content" class="text-white hover:text-blue-300 focus:outline-none flex justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <rect x="3" y="3" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>
                <span class="flex items-center text-gray-300 text-xs sm:text-sm gap-1">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="currentColor" viewBox="0 0 16 16">
    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
  </svg>
  <span id="viewCount">{{ open_count }}</span>
</span>

                <a href="/" title="New Paste" class="text-white hover:text-blue-300 flex justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <main id="mainContent" class="flex-grow w-full h-full px-0 sm:px-6 overflow-auto">
        <div class="flex flex-row w-full h-full overflow-auto">
            <div id="lineNumbers" class="text-gray-500 select-none text-xs sm:text-base font-mono overflow-hidden flex-shrink-0 flex flex-col bg-black pt-2"></div>
            <pre id="pasteContent" class="flex-grow font-mono text-xs sm:text-base whitespace-pre-wrap break-words overflow-auto bg-black pt-2">{{ paste }}</pre>
        </div>
    </main>

    <footer class="glassmorphism py-2 sm:py-4 text-xs sm:text-sm w-full flex-shrink-0">
        <div class="text-center w-full px-2 sm:px-6">
            <p>&copy; 2025 MST Services. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function copyPasteContent() {
            const pasteContent = document.getElementById('pasteContent');
            const text = pasteContent.innerText;
            navigator.clipboard.writeText(text).catch(err => {
                console.error('Failed to copy content: ', err);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const pasteContent = document.getElementById('pasteContent');
            const lineNumbers = document.getElementById('lineNumbers');

            function updateLineNumbers() {
                const lines = pasteContent.innerText.split('\n').length;
                lineNumbers.innerHTML = Array(lines).fill(0).map((_, i) => {
                    return `<div class="pr-2 text-right" style="line-height: 1.5; padding: 0 8px 0 0; min-width: 2rem;">${i + 1}</div>`;
                }).join('');
            }

            updateLineNumbers();

            // Sync scrolling
            pasteContent.addEventListener('scroll', () => {
                lineNumbers.scrollTop = pasteContent.scrollTop;
            });

            document.getElementById('copyContentBtn').addEventListener('click', copyPasteContent);

            // Dynamically set main padding based on navbar height
            function updateMainPadding() {
                const navbar = document.getElementById('navbar');
                const mainContent = document.getElementById('mainContent');
                const navHeight = navbar.offsetHeight;
                mainContent.style.paddingTop = navHeight + 'px';
            }

            updateMainPadding();
            window.addEventListener('resize', updateMainPadding);
        });
    </script>
</body>
</html>
